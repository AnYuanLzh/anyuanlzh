import{d as e,l as t,m as a,p as n,a as l,n as s,o,c as r,b as i,k as d,F as c,q as u,s as m,w as h,u as v,r as p}from"./vendor.1cf71048.js";const g=e=>({year:e.getFullYear(),month:e.getMonth(),day:e.getDate()}),y=(e,t)=>{let a=new Date(e.getTime());return a.setDate(e.getDate()+t),a};var b=e({name:"DatePickerComp",props:{value:{type:Date,default:()=>new Date},open:{type:Boolean,default:!1}},directives:{clickOutside:{mounted(e,t){let a=e.querySelector("#input"),n=t.instance;n.open&&(a.focus(),n.setVisible(!0));let l=t=>{e.contains(t.target)?0==n.isVisible&&n.setVisible(!0):1==n.isVisible&&n.setVisible(!1)};document.addEventListener("click",l),e.clickHandler=l;let s=t=>{e.contains(t.target)&&t.target!=a&&(a!=document.activeElement&&a.focus(),t.preventDefault())};document.addEventListener("mousedown",s),e.mousedownHandler=s},unmounted(e){document.removeEventListener("click",e.clickHandler),e.clickHandler=null,document.removeEventListener("mousedown",e.mousedownHandler),e.mousedownHandler=null}}},emits:["onchange"],setup(e,{emit:n}){const l=t(!1),s=a((()=>{let{year:t,month:a,day:n}=g(e.value);return`${t}-${a+1}-${n}`})),o=a((()=>{let{year:t,month:a}=g(e.value);return`${t}年${a+1}月`})),r=a((()=>{let{year:t,month:a,day:n}=g(e.value),l=((e,t,a)=>new Date(e,t,a))(t,a,1),s=l.getDay(),o=y(l,-s),r=[];for(let e=0;e<42;e++)r.push(y(o,e));return r}));return{isVisible:l,formatDate:s,formatDate2:o,visibleDates:r,setVisible:e=>{l.value=e},isCurrMonth:(t,a)=>r.value[7*(t-1)+(a-1)].getMonth()===e.value.getMonth(),isCurrDate:(t,a)=>{let n=r.value[7*(t-1)+(a-1)];return n.getMonth()===e.value.getMonth()&&n.getDate()===e.value.getDate()},isTodayDate:(e,t)=>{let a=r.value[7*(e-1)+(t-1)];return a.getMonth()===(new Date).getMonth()&&a.getDate()===(new Date).getDate()},chooseDate:(e,t)=>{let a=r.value[7*(e-1)+(t-1)];n("onchange",a)},addYear:t=>{let a=((e,t)=>{let a=new Date(e.getTime());return a.setFullYear(e.getFullYear()+t),a})(e.value,t);n("onchange",a)},addMonth:t=>{let a=((e,t)=>{let a=new Date(e.getTime());return a.setMonth(e.getMonth()+t),a})(e.value,t);n("onchange",a)},setToday:()=>{let t=g(e.value),a=g(new Date);t.year===a.year&&t.month===a.month&&t.day===a.day||n("onchange",new Date)}}}});const D=h("data-v-b5e9396e");n("data-v-b5e9396e");const k={class:"relative text-sm w-44",for:"input"},w=i("span",{class:"w-5 absolute inset-y-0.5 right-0.5"},[i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),f={key:0,class:"absolute bg-gray-100 mt-1\r\n                ring-2 ring-blue-300 rounded w-56 sh"},x={class:"flex justify-around h-8 leading-8 text-center my-0.5"},C={class:"border-b-2 border-t-2 text-xs text-gray-600 font-bold"},M={class:"text-right m-1 text-blue-500 border-t-2"};l();const V=D(((e,t,a,n,l,h)=>{const p=v("click-outside");return s((o(),r("div",k,[i("input",{id:"input",type:"text",value:e.formatDate,placeholder:"yyy-mm-dd",readonly:"",class:"w-44 pl-1 pr-8 py-0.5 text-black text-base leading-4"},null,8,["value"]),w,e.isVisible?(o(),r("div",f,[i("div",x,[i("span",{class:"btn-add-year-month",onClick:t[1]||(t[1]=t=>e.addYear(-1))},"<"),i("span",{class:"btn-add-year-month",onClick:t[2]||(t[2]=t=>e.addMonth(-1))},"<<"),i("span",null,d(e.formatDate2),1),i("span",{class:"btn-add-year-month",onClick:t[3]||(t[3]=t=>e.addMonth(1))},">>"),i("span",{class:"btn-add-year-month",onClick:t[4]||(t[4]=t=>e.addYear(1))},">")]),i("div",null,[i("div",C,[(o(),r(c,null,u(["日","一","二","三","四","五","六"],(e=>i("span",{key:e,class:"inline-flex justify-center items-center w-8 h-7"},d(e),1))),64))]),i("div",null,[(o(),r(c,null,u(6,(t=>i("div",{key:t,class:""},[(o(),r(c,null,u(7,(a=>i("span",{key:a,class:{"date-cell":!0,"date-cell-not-curr-month":!e.isCurrMonth(t,a),"date-cell-curr-date":e.isCurrDate(t,a),"date-cell-today-date":e.isTodayDate(t,a)},onClick:n=>e.chooseDate(t,a)},d(e.visibleDates[7*(t-1)+(a-1)].getDate()),11,["onClick"]))),64))]))),64))])]),i("div",M,[i("span",{class:"inline-block h-7 leading-7 px-2 mt-0.5 text-sm text-center font-medium hover:bg-gray-400 hover:text-gray-50",onClick:t[5]||(t[5]=t=>e.setToday())},"今天")])])):m("",!0)],512)),[[p]])}));b.render=V,b.__scopeId="data-v-b5e9396e";var H=e({name:"Calendar",components:{DataPickerComp:b},setup(){const e=t(new Date);return{pickDate:e,onPickerChange:t=>{e.value=t}}}});const T={class:"pb-6"},Y=i("h1",{class:"text-center pt-2 pb-1"},"简单的日历",-1),E=i("h2",{class:"font-bold"},"原生的日期组件:",-1),P=i("input",{type:"date"},null,-1),$=i("br",null,null,-1),j=i("br",null,null,-1),F=i("h2",{class:"font-bold"},"vue3+ts实现的日期组件:",-1),L=i("p",{class:"pb-1 text-gray-400 text-xs underline italic"}," 有参考：https://www.bilibili.com/video/BV1k4411C7DX?from=search&seid=7343710285072819819 ",-1);H.render=function(e,t,a,n,l,s){const d=p("DataPickerComp");return o(),r("div",T,[Y,i("div",null,[E,P,$,j,F,L,i(d,{open:!1,value:e.pickDate,onOnchange:e.onPickerChange},null,8,["value","onOnchange"])])])};export default H;
